<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Buddy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-wallet"></i>
                Budget Buddy
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" id="nav-dashboard" href="#">
                            <i class="fas fa-chart-pie"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="nav-expenses" href="#">
                            <i class="fas fa-receipt"></i> Expenses
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="nav-income" href="#">
                            <i class="fas fa-coins"></i> Income
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="nav-budget" href="#">
                            <i class="fas fa-sliders-h"></i> Budget
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="nav-reports" href="#">
                            <i class="fas fa-chart-line"></i> Reports
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="nav-signout" href="#">
                            <i class="fas fa-sign-out-alt"></i> Sign Out
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-4">
        <div id="content-area">
            <!-- Content will be loaded here dynamically -->
            <div class="loading"></div>
        </div>
    </div>

    <footer class="bg-light py-3 mt-5">
        <div class="container text-center">
            <p class="text-muted mb-0">Budget Buddy &copy; 2025 | Your Financial Companion</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="app.js"></script>

    <!-- Add this section to handle deep links -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Check for deep link parameters
        const urlParams = new URLSearchParams(window.location.search);
        const view = urlParams.get('view');
        
        if (view) {
          // Handle different views
          switch(view) {
            case 'expenses':
              // Show expenses tab/view
              showExpensesView();
              
              // Apply any filters
              const category = urlParams.get('category');
              if (category) {
                filterExpensesByCategory(category);
              }
              break;
              
            case 'income':
              // Show income tab/view
              showIncomeView();
              break;
              
            case 'dashboard':
            default:
              // Show dashboard
              showDashboardView();
              break;
          }
        }
      });
      
      function showExpensesView() {
        // Call your existing function to show expenses
        document.getElementById('nav-expenses').click();
      }
      
      function showIncomeView() {
        // Call your existing function to show income
        document.getElementById('nav-income').click();
      }
      
      function showDashboardView() {
        // Call your existing function to show dashboard
        document.getElementById('nav-dashboard').click();
      }
      
      function filterExpensesByCategory(category) {
        // First show the expenses view
        showExpensesView();
        
        // Then apply the category filter
        // You'll need to implement this based on your existing UI
        // For example, you might have a dropdown to select categories
        setTimeout(() => {
          const categorySelect = document.getElementById('expense-category');
          if (categorySelect) {
            categorySelect.value = category;
            // Trigger any event handlers that should run when the category changes
            categorySelect.dispatchEvent(new Event('change'));
          }
        }, 500); // Small delay to ensure the expenses view is loaded
      }
    </script>
</body>
</html> 